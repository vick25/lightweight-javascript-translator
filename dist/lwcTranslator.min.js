/**
 * @author codingsamuel
 * @license MIT
 * @version 1.0.0
 * @copyright codingsamuel 2019
 */
"use strict";function _instanceof(a,n){return null!=n&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](a):a instanceof n}function _classCallCheck(a,n){if(!_instanceof(a,n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}}function _createClass(a,n,e){return n&&_defineProperties(a.prototype,n),e&&_defineProperties(a,e),a}var LwcTranslator=function(){function a(n,e,t){_classCallCheck(this,a),this._languageSettings=[],this._languages=[],this._lwcSettings=t,this.languageSettingsFile=n,this.languageFolderPath=e}return _createClass(a,[{key:"_getLwcSettings",value:function(){return this._lwcSettings}},{key:"_translate",value:function(a,n,e,t){var g=a.attr(e.textTranslation||"data-translation"),o=a.attr(e.attrTranslation||"data-translation-attr"),i=t?t.json:{};if(g.split(".").forEach(function(a){i&&(i=i[a])}),n.paragraphSupport&&_instanceof(i,String)){var r=i.split(/\n/g);if(r.length>1){for(var s=0;s<r.length;s++)r[s]="<p>"+r[s]+"</p>";i=r.join("")}}o?a.attr(o,i):a.html(i)}},{key:"_onLoad",value:function(a){var n=this;a&&a.call(this,this.getLanguages());var e=this._getLwcSettings(),t=e.attributes||{},g=this.getLanguage(e.defaultLanguage||"en-UK");$("[".concat(t.textTranslation||"data-translation","]")).each(function(a,o){n._translate($(o),e,t,g)})}},{key:"addLanguages",value:function(a){this._languages=a}},{key:"getLanguage",value:function(a){return this.getLanguages().filter(function(n){return n.filename==a})[0]}},{key:"getLanguages",value:function(){return this._languages}},{key:"setLanguageSettings",value:function(a){this._languageSettings=a}},{key:"getLanguageSettings",value:function(){return this._languageSettings}},{key:"load",value:function(a,n){var e=this;$.ajax({url:this.languageSettingsFile,async:a,success:function(t){e.setLanguageSettings(t);for(var g=[],o=function(o){$.ajax({url:e.languageFolderPath+t[o].filename+".json",async:a,success:function(a){g.push({filename:t[o].filename,json:a}),o==t.length-1&&(e.addLanguages(g),e._onLoad(n.onLanguagesLoaded)),n.onLanguageLoaded&&n.onLanguageLoaded.call(e,a)},error:function(a){throw new Error("Failed to load language from "+e.languageFolderPath+t[o].filename+".json")}})},i=0;i<t.length;i++)o(i);n.onSettingsLoad&&n.onSettingsLoad.call(e,t)},error:function(a){throw new Error("Failed to load "+e.languageSettingsFile+".json")}})}}]),a}();$.fn.lwcTranslator=function(a){var n=new LwcTranslator(a.languageSettingsFile,a.languageFolderPath,a);if(!a||0===Object.entries(a).length&&a.constructor===Object)throw new Error("Please add at least a language settings file path and a folder path.");if(!a.languageSettingsFile||!a.languageFolderPath||""===a.languageSettingsFile||""===a.languageFolderPath)throw new Error("Path cannot be empty.");return n.load(a.async||!0,{onSettingsLoad:a.onLanguageSettingsLoaded,onLanguageLoaded:a.onLanguageLoaded,onLanguagesLoaded:a.onLanguagesLoaded}),n};