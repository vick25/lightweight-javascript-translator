/**
 * @author codingsamuel
 * @license MIT
 * @version 1.0.3
 * @copyright codingsamuel 2019
 */
"use strict";function _instanceof(a,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](a):a instanceof e}function _classCallCheck(a,e){if(!_instanceof(a,e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}}function _createClass(a,e,n){return e&&_defineProperties(a.prototype,e),n&&_defineProperties(a,n),a}Object.entries||(Object.entries=function(a){for(var e=Object.keys(a),n=e.length,t=new Array(n);n--;)t[n]=[e[n],a[e[n]]];return t});var LwcTranslator=function(){function a(e,n,t){_classCallCheck(this,a),this._languageSettings=[],this._languages=[],this._lwcSettings=t,this.languageSettingsFile=e,this.languageFolderPath=n}return _createClass(a,[{key:"_getLwcSettings",value:function(){return this._lwcSettings}},{key:"_translate",value:function(a,e,n,t){var g=a.attr(n.textTranslation||"data-translation"),o=a.attr(n.attrTranslation||"data-translation-attr"),r=t?t.json:{};if(g.split(".").forEach(function(a){r&&(r=r[a])}),e.paragraphSupport&&"string"==typeof r){var i=r.split(/\n/g);if(i.length>1){for(var l=0;l<i.length;l++)i[l]="<p>"+i[l]+"</p>";r=i.join("")}}o?a.attr(o,r):a.html(r)}},{key:"_onLoad",value:function(a){var e=this,n=this._getLwcSettings(),t=n.attributes||{},g=this.getLanguage(n.defaultLanguage||"en-UK");$("[".concat(t.textTranslation||"data-translation","]")).each(function(a,o){e._translate($(o),n,t,g)}),a&&a.call(this,this.getLanguages())}},{key:"addLanguages",value:function(a){this._languages=a}},{key:"getLanguage",value:function(a){return this.getLanguages().filter(function(e){return e.filename==a})[0]}},{key:"getLanguages",value:function(){return this._languages}},{key:"setLanguageSettings",value:function(a){this._languageSettings=a}},{key:"getLanguageSettings",value:function(){return this._languageSettings}},{key:"load",value:function(a,e){var n=this;$.ajax({url:this.languageSettingsFile,async:a}).done(function(t){n.setLanguageSettings(t);for(var g=[],o=function(o){$.ajax({url:n.languageFolderPath+t[o].filename+".json",async:a}).done(function(a){g.push({filename:t[o].filename,json:a}),o==t.length-1&&(n.addLanguages(g),n._onLoad(e.onLanguagesLoaded)),e.onLanguageLoaded&&e.onLanguageLoaded.call(n,a)}).fail(function(a){throw new Error("Failed to load language from "+n.languageFolderPath+t[o].filename+".json")})},r=0;r<t.length;r++)o(r);e.onSettingsLoad&&e.onSettingsLoad.call(n,t)}).fail(function(){throw new Error("Failed to load "+n.languageSettingsFile)})}}]),a}();$.fn.lwcTranslator=function(a){var e=new LwcTranslator(a.languageSettingsFile,a.languageFolderPath,a);if(!a||0===Object.entries(a).length&&a.constructor===Object)throw new Error("Please add at least a language settings file path and a folder path.");if(!a.languageSettingsFile||!a.languageFolderPath||""===a.languageSettingsFile||""===a.languageFolderPath)throw new Error("Path cannot be empty.");return a.paragraphSupport=a.paragraphSupport||!0,e.load(a.async||!0,{onSettingsLoad:a.onLanguageSettingsLoaded,onLanguageLoaded:a.onLanguageLoaded,onLanguagesLoaded:a.onLanguagesLoaded}),e};